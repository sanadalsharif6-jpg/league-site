{% extends "league/base.html" %}
{% block title %}Player{% endblock %}
{% block content %}

<h2>
  {% if player.photo %}<img class="photo" src="{{ player.photo.url }}" alt="">{% endif %}
  {{ player.name }}
</h2>

<p>
  <b>Current Team:</b>
  {% if current_team %}
    {% if current_team.logo %}<img class="logo" src="{{ current_team.logo.url }}" alt="">{% endif %}
    {{ current_team.name }}
  {% else %}
    <span class="muted">—</span>
  {% endif %}
</p>

<h3>Teams History (Season)</h3>
{% if team_history %}
  <ul>
    {% for m in team_history %}
      <li>
        {% if m.team.logo %}<img class="logo" src="{{ m.team.logo.url }}" alt="">{% endif %}
        {{ m.team.name }} — {{ m.start_date }} {% if m.end_date %}→ {{ m.end_date }}{% else %}(active){% endif %}
      </li>
    {% endfor %}
  </ul>
{% else %}
  <p class="muted">No memberships yet.</p>
{% endif %}

<h3>Transfers</h3>
{% if transfers %}
  <ul>
    {% for t in transfers %}
      <li>{{ t.date }}: {{ t.from_team|default:"-" }} → <b>{{ t.to_team }}</b></li>
    {% endfor %}
  </ul>
{% else %}
  <p class="muted">No transfers</p>
{% endif %}

<h3>Achievements</h3>
{% if achievements %}
  <ul>
    {% for a in achievements %}
      <li>{{ a.awarded_at }} — <b>{{ a.achievement_type.name }}</b> {% if a.scope %}<span class="muted">({{ a.scope.division.name }} / {{ a.scope.group.name }})</span>{% endif %}</li>
    {% endfor %}
  </ul>
{% else %}
  <p class="muted">No achievements</p>
{% endif %}

{% endblock %}
